(* program BINOM *)
(* page 124      *)
(* 20/4/1994     *)

in    k, n: int;
local y1  : int where y1 = n;
local y2, r: int where y2 = 1 /\ r = 1;
out      b: int where b = 1;

P1::
[
  l_0: while y1 > (n-k) do
  [
    l_1: request r;
    l_2: << b:= b * y1; release r >>;
    l_3: y1 := y1 - 1;
  ];
  l_4:
]

||

P2::
[
  m_0: while y2 <= k do
  [
    m_1: await y1 + y2 <= n;
    m_2: << request r; b := b div y2 >>; 
    m_3: << release r; y2 := y2 + 1 >>
  ];
  m_4:
]
